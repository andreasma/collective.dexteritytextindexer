<configure xmlns="http://namespaces.zope.org/zope"
           xmlns:grok="http://namespaces.zope.org/grok"
           xmlns:i18n="http://namespaces.zope.org/i18n"
           xmlns:plone="http://namespaces.plone.org/plone"
           xmlns:zcml="http://namespaces.zope.org/zcml"
           i18n_domain="collective.dexteritytextindexer">

    <!-- Include configuration for dependencies listed in setup.py -->
    <include package="z3c.autoinclude" file="meta.zcml" />
    <includeDependencies package="." />

    <!-- grok it -->
    <include package="five.grok" />
    <include package="plone.supermodel" />
    <grok:grok package="." />

    <!-- marker behavior for enabling indexer -->
    <plone:behavior
          title="Dynamic SearchableText indexer behavior"
          description="Enables the dynamic SearchableText indexer for a content type"
          provides="collective.dexteritytextindexer.behavior.IDexterityTextIndexer"
          for="plone.dexterity.interfaces.IDexterityContent"
          />

    <utility
        factory=".supermodel.IndexerSchema"
        name="collective.dexteritytextindexer.indexer"
        />

    <adapter
        factory="collective.dexteritytextindexer.indexer.dynamic_searchable_text_indexer"
        name="SearchableText" />

    <!-- field converters -->
    <adapter
        factory="collective.dexteritytextindexer.converters.DefaultDexterityTextIndexFieldConverter"
        />

    <adapter
        zcml:condition="installed plone.namedfile"
        factory="collective.dexteritytextindexer.converters.NamedfileFieldConverter"
        />

    <adapter
        factory="collective.dexteritytextindexer.converters.IntFieldConverter"
        />

</configure>
